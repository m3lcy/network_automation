hostname core-r1
enable secret cisco_r1_secret01
username melcy privilege 15 secret cisco
banner motd Authorized Access Only!!!
service password-encryption
ip domain-name cisco.com
crypto key generate rsa usage-keys label ssh-key modulus 1024
line vty 0 4
 password cisco123
 login local
 transport input ssh
spanning-tree mode pvst
interface Loopback0
 description LOOPBACK - SSH / BGP
 ip address 172.16.255.1 255.255.255.255
 no shutdown
interface GigabitEthernet0/0
 description UPLINK TO l3-sw-01 g0/1
 no switchport
 ip address 172.16.12.226 255.255.255.252
 no shutdown
interface GigabitEthernet0/1
 description UPLINK TO l3-sw-02 g0/1
 no switchport
 ip address 172.16.12.229 255.255.255.252
 no shutdown
interface Serial0/0/0
 description WAN LINK TO HQ | NAT OUTSIDE
 no switchport
 ip address 172.17.12.1 255.255.255.0
 no shutdown
 ip nat outside
interface Serial0/0/1
 description SPARE / UNUSED
 shutdown
interface VLAN1
 shutdown
ip dhcp pool VLAN10
 network 172.16.12.0 255.255.255.224
 default-router 172.16.12.1
ip dhcp pool VLAN20
 network 172.16.12.32 255.255.255.224
 default-router 172.16.12.33
ip dhcp pool VLAN30
 network 172.16.12.64 255.255.255.224
 default-router 172.16.12.65
ip dhcp pool VLAN99
 network 172.16.12.96 255.255.255.224
 default-router 172.16.12.97
ip dhcp pool VLAN100
 network 172.16.12.128 255.255.255.224
 default-router 172.16.12.129
ip dhcp pool VLAN200
 network 172.16.12.160 255.255.255.224
 default-router 172.16.12.161
ip dhcp pool VLAN300
 network 172.16.12.192 255.255.255.224
 default-router 172.16.12.193
ip dhcp excluded-address 172.16.12.1 172.16.12.30
ip dhcp excluded-address 172.16.12.33 172.16.12.62
ip dhcp excluded-address 172.16.12.65 172.16.12.94
ip dhcp excluded-address 172.16.12.97 172.16.12.126
ip dhcp excluded-address 172.16.12.129 172.16.12.158
ip dhcp excluded-address 172.16.12.161 172.16.12.190
ip dhcp excluded-address 172.16.12.193 172.16.12.222
router ospf 1
 router-id 1.1.1.1
 default-information originate
 network 172.16.12.224 0.0.0.3 area 0
 network 172.16.12.228 0.0.0.3 area 0
router bgp 65001
 neighbor 172.17.255.1 remote-as 65000
 neighbor 172.17.255.1 update-source Loopback0
 neighbor 172.17.255.1 ebgp-multihop 2
 network 172.16.255.1 mask 255.255.255.255
 network 172.16.12.0 mask 255.255.255.224
 network 172.16.12.32 mask 255.255.255.224
 network 172.16.12.64 mask 255.255.255.224
 network 172.16.12.96 mask 255.255.255.224
 network 172.16.12.128 mask 255.255.255.224
 network 172.16.12.192 mask 255.255.255.224
 network 172.16.12.224 mask 255.255.255.224
ip route 0.0.0.0 0.0.0.0 Serial0/0/0
ip route 172.17.255.1 255.255.255.255 172.17.12.2
ip nat inside source list 1 interface Serial0/0/0 overload
ip access-list standard 1
 permit any any  any
ip access-list extended MGMT_VTY_ACL
 remark RESTRICT SSH MANAGEMENT ACCESS
 remark ONLY ALLOW FROM MANAGEMENT VLAN 20
 permit tcp 172.16.12.32 0.0.0.31 any eq 22
 remark ALLOW OTHER TRAFFIC
 permit ip any  any
ip default-gateway 172.16.12.98
end
