hostname: "core-r1"

banner: "Authorized Access Only!!!"

service_password_encryption: true

ip_routing: False

domain:
  lookup: false
  name: cisco.com

crypto_rsa_key: "crypto key generate rsa usage-keys label ssh-key modulus 1024"

line_vty:
  range: 0 4
  password: "cisco123"
  login: local
  transport_input: ssh
  access_class:
    name: MGMT_VTY_ACL
    direction: in

stp:
  mode: pvst

interfaces:
  - name: Loopback0
    description: "LOOPBACK - SSH / BGP"
    ip_address: 172.16.255.1 
    subnet_mask: 255.255.255.255
    shutdown: false

  - name: GigabitEthernet0/0
    description: "UPLINK TO l3-sw-01 g0/1"
    mode: routed
    ip_address: 172.16.12.226
    subnet_mask: 255.255.255.252
    duplex: auto
    speed: auto
    shutdown: false

  - name: GigabitEthernet0/1
    description: "UPLINK TO l3-sw-02 g0/1" 
    mode: routed
    ip_address: 172.16.12.229
    subnet_mask: 255.255.255.252
    duplex: auto
    speed: auto
    shutdown: false

  - name: Serial0/0/0
    description: "WAN LINK TO HQ | NAT OUTSIDE"
    mode: routed
    ip_address: 172.17.12.1
    subnet_mask: 255.255.255.0
    nat_inside: false
    clock_rate: 2000000
    shutdown: false

  - name: Serial0/0/1
    description: "SPARE / UNUSED"
    shutdown: true

  - name: VLAN1
    shutdown: true

dhcp:
  excluded_addresses:
    - { start: 172.16.12.1, end: 172.16.12.30 }
    - { start: 172.16.12.33, end: 172.16.12.62 }
    - { start: 172.16.12.65, end: 172.16.12.94 }
    - { start: 172.16.12.97, end: 172.16.12.126 }
    - { start: 172.16.12.129, end: 172.16.12.158 }
    - { start: 172.16.12.161, end: 172.16.12.190 }
    - { start: 172.16.12.193, end: 172.16.12.222 }
  pools:
    - vlan: 10
      network: 172.16.12.0
      subnet_mask: 255.255.255.224
      default_router: 172.16.12.1

    - vlan: 20
      network: 172.16.12.32
      subnet_mask: 255.255.255.224
      default_router: 172.16.12.33

    - vlan: 30
      network: 172.16.12.64
      subnet_mask: 255.255.255.224
      default_router: 172.16.12.65

    - vlan: 99
      network: 172.16.12.96
      subnet_mask: 255.255.255.224
      default_router: 172.16.12.97

    - vlan: 100
      network: 172.16.12.128
      subnet_mask: 255.255.255.224
      default_router: 172.16.12.129

    - vlan: 200
      network: 172.16.12.160
      subnet_mask: 255.255.255.224
      default_router: 172.16.12.161

    - vlan: 300
      network: 172.16.12.192
      subnet_mask: 255.255.255.224
      default_router: 172.16.12.193

routing:
  ospf:
    process_id: 1
    router_id: 1.1.1.1
    default_information_originate: true
    networks:
      - { network: 172.16.12.224, wildcard: 0.0.0.3, area: 0 }
      - { network: 172.16.12.228, wildcard: 0.0.0.3, area: 0 }

  bgp:
    as_number: 65001
    neighbors:
      - ip: 172.17.255.1
        remote_as: 65000
        update_source: Loopback0
        multi_hop: 2
    networks:
      - { network: 172.16.255.1, subnet_mask: 255.255.255.255 }
      - { network: 172.16.12.0, subnet_mask: 255.255.255.224 }
      - { network: 172.16.12.32, subnet_mask: 255.255.255.224 }
      - { network: 172.16.12.64, subnet_mask: 255.255.255.224 }
      - { network: 172.16.12.96, subnet_mask: 255.255.255.224 }
      - { network: 172.16.12.128, subnet_mask: 255.255.255.224 }
      - { network: 172.16.12.192, subnet_mask: 255.255.255.224 }
      - { network: 172.16.12.224, subnet_mask: 255.255.255.224 }

  ip_route:
   - { network: 0.0.0.0, subnet_mask: 0.0.0.0, serial: Serial0/0/0 }
   - { network: 172.17.255.1, subnet_mask: 255.255.255.255, serial: 172.17.12.2 }

nat:
  inside_source_overload:
    access_list: 1
    interface: Serial0/0/0

access_lists:
  - name: 1
    type: standard
    rules:
      - permit: any

  - name: MGMT_VTY_ACL
    type: extended
    entries:
      - { remark: "RESTRICT SSH MANAGEMENT ACCESS" }
      - { remark: "ONLY ALLOW FROM MANAGEMENT VLAN 20" }
      - { permit: tcp, src: 172.16.12.32, wildcard: 0.0.0.31, dest: any, port: "eq 22" }
      - { remark: "ALLOW OTHER TRAFFIC" }
      - { permit: ip, src: any, dest: any }

default_gateway: 172.16.12.98